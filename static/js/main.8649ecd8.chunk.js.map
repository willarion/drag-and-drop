{"version":3,"sources":["components/Shape.js","components/App.js","index.js"],"names":["Shape","props","initialShapePosition","circle","top","left","React","useState","isDragging","setIsDragging","coordinates","setCoordinates","prevСoordinates","setPrevCoordinates","isUpper","setIsUpper","extractPositionDelta","e","pageX","pageY","delta","useEffect","isDraggable","handleDelete","key","console","log","deleteFigure","document","addEventListener","removeEventListener","draggable","className","onPointerMove","onDragStart","preventDefault","onPointerUp","style","cursor","border","zIndex","onMouseEnter","hangleFigure","App","circleId","setCircleId","id","name","circles","setCircles","squareId","setSquareId","squares","setSquares","handleId","setter","prevState","createShapeDuplicate","newCircle","createCircle","newSquare","createSquare","length","map","square","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8649ecd8.chunk.js","sourcesContent":["import React from 'react';\r\nimport './Shape.css';\r\n\r\nfunction Shape(props) {\r\n\r\n  const initialShapePosition = props.circle \r\n    ? { top: 120, left: 80 } \r\n    : { top: 240, left: 80 }\r\n  \r\n  const [isDragging, setIsDragging] =  React.useState(false)\r\n  const [coordinates, setCoordinates] = React.useState(initialShapePosition)\r\n  const [prevСoordinates, setPrevCoordinates] = React.useState({ top: 0, left: 0 })\r\n  const [isUpper, setIsUpper] = React.useState(false)\r\n\r\n  function extractPositionDelta(e) {\r\n    const left = e.pageX\r\n    const top = e.pageY\r\n\r\n    const delta = {\r\n      left: left - prevСoordinates.left\r\n      ,\r\n      top: top - prevСoordinates.top,\r\n    }\r\n\r\n    setPrevCoordinates({top, left})\r\n\r\n    return delta\r\n  }\r\n\r\n  function handleMouseDown(e) {\r\n    e.preventDefault();\r\n\r\n    setIsUpper(true)\r\n    setIsDragging(true)\r\n    extractPositionDelta(e)\r\n  }\r\n\r\n  function handleMouseUp(e) {\r\n    setIsDragging(false)\r\n    setIsUpper(false)\r\n  }\r\n\r\n  function handlePointerMove(e) {\r\n    if (!isDragging) {\r\n      return\r\n    }\r\n\r\n    const {left, top} = extractPositionDelta(e);\r\n\r\n    setCoordinates({\r\n      top: coordinates.top + top,\r\n      left: coordinates.left + left,\r\n    })\r\n  }\r\n\r\n \r\n  React.useEffect(() => {\r\n    if (props.isDraggable) {\r\n\r\n      function handleDelete(e) {\r\n        if (e.key === 'Delete' ) {\r\n\r\n          console.log(props)\r\n          props.deleteFigure()\r\n        }\r\n      }\r\n      \r\n      document.addEventListener('keyup', handleDelete)\r\n  \r\n      return () => {\r\n        document.removeEventListener('keyup', handleDelete)\r\n      }\r\n    }\r\n  }, [props])\r\n\r\n  return (\r\n    <>\r\n      { props.isDraggable\r\n        ? \r\n        (<div draggable={true} className={props.circle ? \"shape circle\" : 'shape square'} \r\n            onPointerMove={handlePointerMove}\r\n            onDragStart={handleMouseDown}\r\n            onPointerUp={handleMouseUp}\r\n            style={{\r\n                top: `${coordinates.top}px`,\r\n                left: `${coordinates.left}px`,\r\n                cursor: isDragging ? 'grabbing' : 'grab',\r\n                border: isDragging ? '3px solid black' : '1px solid black',\r\n                zIndex: isUpper ? 999 : 0,\r\n              }}\r\n          />)\r\n        :\r\n        (<div className={props.circle ? \"shape circle\" : 'shape square'} \r\n          onMouseEnter={() => props.hangleFigure(props.circle)}\r\n          style={{\r\n            top: `${props.circle ? 120 : 240}px`,\r\n            left: `80px`,}}\r\n        />)\r\n      }  \r\n    </>\r\n  );\r\n}\r\n\r\nexport default Shape;","import React from 'react';\nimport './App.css';\nimport Shape from './Shape';\n\n\nfunction App() {\n\n  const [circleId, setCircleId] = React.useState(1)\n  const [circles, setCircles] = React.useState([{id: '0ci', name: 'изначальный круг'}])\n  const [squareId, setSquareId] = React.useState(1)\n  const [squares, setSquares] = React.useState([{id: '0sq', name: 'изначальный квадрат'}])\n\n  function handleId(setter) {\n    setter((prevState) => (prevState += 1))\n  }\n\n  function createCircle() {\n   \n    handleId(setCircleId)\n\n    const newCircle = {id: circleId + 'ci', name: 'круг' }\n    setCircles([...circles, newCircle])\n  }\n\n  function createSquare() {\n\n    handleId(setSquareId)\n\n    const newSquare = {id: squareId + 'sq', name: 'квадрат' }\n    setSquares([...squares, newSquare])\n  }\n\n  function createShapeDuplicate(circle) {\n    if (circle) {\n      createCircle()\n      return\n    }\n    createSquare()\n  }\n\n\n  return (\n    <div className=\"App\" >\n      <p className=\"title\">Drag us around!</p>\n      <Shape \n        hangleFigure={createShapeDuplicate}\n        circle={true}\n        isDraggable={false}\n        />\n      <Shape \n        hangleFigure={createShapeDuplicate}\n        circle={false}\n        isDraggable={false}\n      />\n      { circles.length > 0 && circles.map((circle) => \n        <Shape key={circle.id}\n          id={circle.id}\n          circle={true}\n          isDraggable={true}\n        />\n      )}\n      { squares.length > 0 && squares.map((square) => \n        <Shape key={square.id}\n          id={square.id}\n          circle={false}\n          isDraggable={true}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}